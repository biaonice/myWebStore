<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="../js/jquery-3.1.1.min.js"></script>
    <style>
        #change_me{
            position:absolute;
            top:100px;
            left:400px;
            font:24px arial;
        }
        .move_up .move_down .color .disappear{
            padding:5px;
        }
    </style>
</head>
<body>
    <button onclick="shake(this,fadeOut);">Shake and Fade</button>
    <button class="move_up">sjfgh</button>
    <button class="move_down">sjfgh</button>
    <button class="color">sjfgh</button>
    <button class="disappear">sjfgh</button>
    <div id="change_me">Make Me Do Stuff!</div>
    <i>1234</i>

    <ul id="one" class="level-1">
        <li class="item-i">I</li>
        <li id="ii" class="item-ii">II
            <ul class="level-2">
                <li class="item-a">A</li>
                <li class="item-b">B
                    <ul class="level-3">
                        <li class="item-1">1</li>
                        <li class="item">2</li>
                        <li class="item">3</li>
                    </ul>
                </li>
                <li class="item-c">C</li>
            </ul>
        </li>
        <li class="item-iii">III</li>
    </ul>
<div class="guess_box">fgsdfgasdgsdfgadgas</div>

<b>holle</b>
<p>qwerqwe</p>

</body>
<script>

    $("p").after($("b"));
    $(document).ready(function(){
        function fadeOut(e,oncomplete,time){
            if (typeof e ==="string") e = document.getElementById(e);
            if (!time) time = 500;

            var ease=Math.sqrt;
            var start=(new Date().getTime());
        animate();
        function animate(){
            var elapsed=(new Date()).getTime()-start;
            var fraction=elapsed/time;
            if (fraction<1){
                var opacity=1-ease(fraction);
                e.style.opacity = String(opacity);
                setTimeout(animate, Math.min(25,time-elapsed));
            }else{
                e.style.opacity="0";
                if (oncomplete) oncomplete(e);
            }
        }
    }

        $(".move_up").click(function(){
            $("#change_me").animate({top:30},200);
        });
        $(".move_down").click(function(){
            $("#change_me").animate({top:500},2000);
        });
        $(".color").click(function(){
            $("#change_me").css("color","purple");
        });
        $(".disappear").click(function(){
            $("#change_me").toggle("slow");
        });

        $(".guess_box").click(checkForCode);

        function getRandom(num){
            var my_num=Math.floor(Math.random()*num);
            return my_num;
        }
        var hideCode=function(){
            var numRand=getRandom(4);
            $(".guess_box").each(function(index,value){
                if (numRand==index){
                    $(this).append("<span id='has_discount'></span>");
                    return false;
                }
            });
        }
        hideCode();
        function checkForCode(){
            var discount;
            if ($.contains(this,document.getElementById("has_discount"))){
                var my_num=getRandom(5);
                discount="<p>Your Discount is "+my_num+"%</p>";
            }else{
                discount="<p>Sorry,no discount this time!</p>";
            }
            $(this).append(discount);
            $(".guess_box").each(function(){
                $(this).unbind('click');
            });
        }
    });
$(".item").after("<span>test</span>")
    $( "li.item-a" )
            .closest( "ul" )
            .css( "background-color", "red" );
    $( "li" ).each(function( index ) {
        console.log( index + ": " + $( this ).text() );
    });
    $( "li.item-a" )
            .closest( "li" )
            .css( "background-color", "red" );
    $("li").has("ul").css("background","red");



    /**
     * css动画
     */

        function shake(e,oncomplete,distance,time){
        if (typeof e ==="string") e = document.getElementById(e);
        if (!time) time = 500;
        if (!distance) distance=5;

        var originalStyle=e.style.cssText;
        e.style.postion="relative";
        var start=(new Date()).getTime();
        animate();
        function animate(){
            var now=(new Date()).getTime();
            var elapsed=now-start;
            var fraction=elapsed/time;

            if (fraction<1){
                var x=distance*Math.sin(fraction*4*Math.PI);
                e.style.left = x+"px";
                setTimeout(animate, Math.min(25,time-elapsed));
            }else{
                e.style.cssText = originalStyle
                if (oncomplete) oncomplete(e);
            }
        }
    }
    function fadeOut(e,oncomplete,time){
        if (typeof e ==="string") e = document.getElementById(e);
        if (!time) time = 500;

        var ease=Math.sqrt;
        var start=(new Date()).getTime();
        animate();
        function animate(){
            var elapsed=(new Date().getTime())-start;
            var fraction=elapsed/time;
            if (fraction<1){
                var opacity=1-ease(fraction);
                e.style.opacity = String(opacity);
                setTimeout(animate,Math.min(25,time-elapsed));
            }else{
                e.style.opacity="0";
                if (oncomplete) oncomplete(e);
            }
        }

</script>
</html>